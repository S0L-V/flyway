name: Discord Notify - Dev Updated

on:
  pull_request:
    types: [closed]

jobs:
  notify:
    # PRì´ merge ë˜ì—ˆê³ , base ë¸Œëœì¹˜ê°€ devì¼ ë•Œë§Œ ì‹¤í–‰
    if: github.event.pull_request.merged == true && github.event.pull_request.base.ref == 'dev'
    runs-on: ubuntu-latest

    steps:
      - name: Send Discord notification (dev updated)
        env:
          DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
        run: |
          PR_NUM=${{ github.event.pull_request.number }}
          TITLE="${{ github.event.pull_request.title }}"
          URL="${{ github.event.pull_request.html_url }}"

          MSG="ğŸ”„ **dev ë¸Œëœì¹˜ ì—…ë°ì´íŠ¸ë¨**\n\nPR #$PR_NUM $TITLE\n$URL\n\nğŸ‘‰ dev ë¸Œëœì¹˜ pull ë°›ì•„ì£¼ì„¸ìš”."

          curl -sS -X POST \
            -H "Content-Type: application/json" \
            -d "{\"content\":\"$MSG\"}" \
            "$DISCORD_WEBHOOK_URL"
